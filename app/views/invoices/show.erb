<%= render "submenu" %>

<div id="invoice-page">
  <div id="invoice-top">
    <div id="companies">
      <div class="company-info">
        <span>From</span>
        <% if get_company_info(@invoice.user.profile).size > 0 %>
      	  <%= @invoice.header.present? ? markdown(@invoice.header) : (get_company_info @invoice.user.profile) %>
      	<% else %>
      	  <%= link_to 'Edit', settings_path, class: 'no-print' %>
      	<% end %>
      </div>

      <div class="customer-info">
        <span>To</span>
        <% if @invoice.customer.address1.present? and @invoice.customer.city.present? and @invoice.customer.postal_code.present? %>
          <%= get_customer_info @invoice.customer %>
        <% else %>
          <%= get_customer_info @invoice.customer %>
          <%= link_to 'Edit', edit_customer_path(@invoice.customer), remote: :true, class: 'no-print' %>
        <% end %>
      </div>
    </div>
    <%= render 'header' %>
  </div>
  <div id="line_items_list">
    <%= render 'line_items_list' %>
  </div>
  <%= render 'note' unless @invoice.note.empty? %>
</div>

<script type="text/javascript" charset="utf-8">
  $(function() {
    Invoices.Show.init();
  });
</script>