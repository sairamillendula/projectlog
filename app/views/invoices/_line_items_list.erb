<table id="invoice_line_items" data-update-url="<%= sort_invoice_url(@invoice) %>">
  <tr>
    <th id="i_type">Type</th>
    <th id="i_description">Description</th>
    <th id="i_qty">Qty</th>
    <th id="i_price">Price</th>
    <th id="i_subtotal">Subtotal</th>
  </tr>
  <% if @invoice.line_items.any? %>
    <% @invoice.line_items.each do |line| %>
      <%= content_tag_for :tr, line do %>
        <td><%= line.line_type %></td>
        <td><%= line.description %></td>
        <td><%= line.quantity %></td>
        <td><%= Money.from_float(line.price, @invoice.currency).format(:symbol => true) %></td>
        <td><%= Money.from_float(line.price * line.quantity, @invoice.currency).format(:symbol => true) %></td>
      <% end %>
    <% end %>
    <!-- SUBTOTAL -->
    <% if @invoice.any_taxes? or @invoice.discount_amount > 0 %>
    <tr class="total-fields"> 
      <td colspan="4" class="i_total first-row">Subtotal</td>
      <td class="first-row"><%= Money.from_float(@invoice.subtotal, @invoice.currency).format(:symbol => true) %></td>
    </tr>
    <% end %>
    <!-- TAX 1 -->
    <% if @invoice.tax1_amount > 0 %>
    <tr class="total-fields">
      <td colspan="4" class="i_total"><%= @invoice.tax1_name %></td>
      <td><%= Money.from_float(@invoice.tax1_amount, @invoice.currency).format(:symbol => true) %></td>
    </tr>
    <% end %>
    <!-- TAX 2 -->
    <% if @invoice.tax2_amount > 0 %>
    <tr class="total-fields">
      <td colspan="4" class="i_total"><%= @invoice.tax2_name %></td>
      <td><%= Money.from_float(@invoice.tax2_amount, @invoice.currency).format(:symbol => true) %></td>
    </tr>
    <% end %>
    <!-- DISCOUNT -->
    <% if @invoice.discount && @invoice.discount > 0 %>
      <tr class="total-fields">
        <td colspan="4" class="i_total">Discount</td>
        <td><%= @invoice.discount %> %</td>
      </tr>
    <% end %>
    <tr class="total-fields">
      <td colspan="4" class="i_total">Amount Due</td>
      <td><%= Money.from_float(@invoice.amount_due, @invoice.currency).format(:symbol => true) %></td>
    </tr>
  <% end %>
</table>
