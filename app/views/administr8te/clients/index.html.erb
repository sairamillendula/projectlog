<h1>Manage Users</h1>

<p class="right">Server Time: <b><%= Time.zone.now.strftime("%d-%m-%Y %H:%M") %></b></p>

<div id="activity-search">
<span>Total: <b><%= pluralize(User.standard.size, 'standard user') %></b> and <b><%= pluralize(User.admin.size, 'administrator') %></b></span>

<span id="export" class="right">
  <%= form_tag administr8te_clients_path, :method => 'get' do %>
    <%= hidden_field_tag :direction, params[:direction] %>
    <%= hidden_field_tag :sort, params[:sort] %>
    <%= text_field_tag :search, params[:search] %>
    <span class="small submit"><%= submit_tag "Search", :name => nil %></span>
  <% end %>
</span> 
</div>

<table id="clients" class="admin">
  <tr>
    <th><%= sortable "" %></th>
    <th><%= sortable "email" %></th>
    <th><%= sortable "first_name" %></th>
    <th><%= sortable "last_name" %></th>
    <th><%= sortable "sign_in_count" %></th>
    <th><%= sortable "last_sign_in_at", {}, "Last Sign in" %></th>
    <th><%= sortable "current_sign_in_ip", {}, "Current IP" %></th>
    <th><%= sortable "created_at" %></th>
  </tr>

<% for user in @users %>
  <tr>
    <td><% if user.admin%><span class="administrator"><% end %></td>
    <td><%= user.email %></td>
    <td><%= user.first_name %></td>
    <td><%= user.last_name %></td>
    <td style="text-align:center"><%= user.sign_in_count %></td>
    <td><%= user.last_sign_in_at.strftime("%d-%m-%Y %H:%M") if user.last_sign_in_at.present? %></td>
    <td><%= user.current_sign_in_ip %></td>
    <td><%= user.created_at.strftime("%d-%m-%Y") %></td>
  </tr>
<% end %>
</table>

<div class="right">
   <%= paginate @users, :params => { :controller => "administr8te/clients", :action => "index" } %>
</div>  