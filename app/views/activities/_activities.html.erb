<div id="time-entries">

<% if @activities.empty? %>
  <% if params[:search] %>
    <%= render "activities/table_header" %>
    <div class="no-occurence">
      <p>No activity matches '<%= params[:search] %>'.</p>
    </div>
  <% else %>
  	<div id="first_activity_form">
  	<%= form_for([@project, @project.activities.new]) do |f| %>
      <%= render :partial => "activities/fields", :locals => { :f => f} %>
    <% end %>
    </div>
  <% end %>

<% else %>

  <%= render "activities/table_header" %>
  <table class='activities'>
    <tr>
      <th width="10%"><%= sortable "date", { :controller => "activities", :action => "index", :project_id => @project.id } %></th>
      <th width="8%"><%= sortable "time", { :controller => "activities", :action => "index", :project_id => @project.id } %></th>
      <th><%= sortable "description", { :controller => "activities", :action => "index", :project_id => @project.id } %></th>
      <th></th>
    </tr>

    <% @activities.each do |activity| %>
      <%= content_tag :tr, :id => "row_for_activity_#{activity.id}" do %>
        <%= render activity %>
      <% end %>
    <% end %>

    <tr class="total">
      <th style="text-align:right" class="total">TOTAL</th>
      <th id="project_total_time"><%= number_with_delimiter(@project.total_hours) %></th>
      <th class="total_in_days" id="project_total_in_days"><%= activities_to_days(@project.total_hours) %></th>
      <th></th>
    </tr>
  </table>

  <div class="right">
    <%= paginate @activities, :params => { :controller => "activities", :action => "index", :project_id => @project.id } %>
  </div>

<% end %>
</div>